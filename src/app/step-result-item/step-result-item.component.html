<div class="form-group" >
  <div class="col-sm-1">
    <span class="glyphicon glyphicon-ok-circle" style="color: green;" *ngIf="stepResult.result == 'OK'"></span>
    <span class="glyphicon glyphicon-time" style="color: orange;" *ngIf="stepResult.result != 'OK' && stepResult.result != 'Fail'"></span>
    <span class="glyphicon glyphicon-remove-circle" style="color: red;" *ngIf="stepResult.result == 'Fail'"></span>
    {{stepResult.result}}
  </div>
  <div class="col-sm-11">{{stepResult.step.stepComment}} {{stepResult.description}}</div>
  <div class="clearfix"></div>
  <div style="color: gray;" class="col-sm-11 col-sm-offset-1">
    {{stepResult.step.requestMethod}}
    {{stepResult.requestUrl}}
  </div>
  <div class="col-sm-11 col-sm-offset-1">
    <a href="#" style="text-decoration: none; border-bottom: 1px dashed;" (click)="displayDetails = !displayDetails; false;">{{'Details' | translate}} <span class="glyphicon" [class.glyphicon-chevron-right]="!displayDetails" [class.glyphicon-chevron-down]="displayDetails"></span></a>
  </div>
  <div class="clearfix"></div>
  <div class="col-sm-11 col-sm-offset-1" *ngIf="displayDetails">
    <ul class="nav nav-tabs">
      <li [class.active]="tab == 'details'"><a href="#" (click)="selectTab('details')">{{'Details' | translate}}</a></li>
      <li *ngIf="stepResult.editable" [class.active]="tab == 'stepEdit'"><a href="#" (click)="selectTab('stepEdit')">{{'Edit step' | translate}}</a></li>
      <li [class.active]="tab == 'json'"><a href="#" (click)="selectTab('json')">json</a></li>
    </ul>
    <div class="tab-content" style="padding: 10px;">
      <div *ngIf="tab == 'details' || tab == 'all'">
        <div class="row">
          <div class="col-sm-12" style="color: gray;">
            <div *ngIf="stepResult.pollingRetryCount > 1">{{'Polling retry count' | translate}}: {{stepResult.pollingRetryCount}}</div>
            {{'Scenario variables' | translate}}: {{stepResult.savedParameters}}<br/>
            Test id: {{stepResult.testId}}
          </div>
          <div class="clearfix"></div>
          <div class="col-sm-12">
            <label>{{'Request body' | translate}}</label>
            <div class="form-control" style="overflow: scroll; height: 180px; white-space: pre; background-color: #eee;">{{stepResult.requestBody}}</div>
          </div>
          <div class="clearfix"></div>
          <div *ngIf="!isShowDiffComponent()">
            <div class="col-sm-6">
              <label>Actual</label>
              <div class="form-control"
                   #actualResult
                   style="overflow: scroll; height: 180px; background-color: #eee;"
                   [appSyncScroll]="expectedResult">
                {{stepResult.actual}}
              </div>
            </div>
            <div class="col-sm-6">
              <label>Expected</label>
              <div class="form-control"
                   #expectedResult
                   style="overflow: scroll; height: 180px; background-color: #eee;"
                   [appSyncScroll]="actualResult">
                {{stepResult.expected}}
              </div>
            </div>
          </div>
          <app-diff
            *ngIf="isShowDiffComponent()"
            [expected]="stepResult.expected"
            [actual]="stepResult.actual">
          </app-diff>
          <div class="col-sm-12" style="color: gray;">
            <label>{{'Details' | translate}}</label>
            <pre>{{stepResult.details}}</pre>
          </div>
        </div>
      </div>
      <div *ngIf="tab == 'json' || tab == 'all'">
        <pre>{{stepResult | json}}</pre>
      </div>
      <div *ngIf="stepResult.editable && (tab == 'stepEdit' || tab == 'all')">
        <app-step-item [step]="stepResult.step"></app-step-item>
        <button class="btn btn-xs btn-success" (click)="saveStep()">{{'Save step' | translate}}</button>
      </div>
    </div>
  </div>
</div>
