<button style="margin: 10px 0 0 10px;" class="btn btn-default" (click)="updateRequestList()"><span class="glyphicon glyphicon-refresh"></span> Update request list</button>
<button style="margin: 10px 0 0 10px;" class="btn btn-default" (click)="clearRequestList()"><span class="glyphicon glyphicon-remove"></span> Clear request list</button>
<div *ngIf="!selectedRequest && requestList">
  <table style="margin-top: 10px;" class="table table-hover">
    <thead>
      <tr>
        <th>Time</th>
        <th>Method</th>
        <th>Url</th>
        <th>Response code</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let request of requestList.requests" (click)="select(request)">
        <td>{{request.request.loggedDateString}}</td>
        <td>{{request.request.method}}</td>
        <td>{{request.request.absoluteUrl}}</td>
        <td>{{request.response.status}}</td>
        <td>{{request.request.headers['testidheader'] ? 'AT' : ''}}</td>

      </tr>
    </tbody>
  </table>
</div>

<div style="margin: 10px;" *ngIf="selectedRequest">
  <button style="margin: 10px 0;" class="btn btn-default" (click)="selectedRequest = null"><span class="glyphicon glyphicon-backward"></span> Return to list</button>

  <h3>Request</h3>
  <div class="form-horizontal">
    <div class="form-group">
      <div class="col-sm-2">
        <label>Headers</label>
        <div *ngFor="let key of selectedRequest.request.headers | ObjNgFor">
          {{key}}: {{selectedRequest.request.headers[key]}}
        </div>
      </div>
      <div class="col-sm-10">
        <label>Body</label>
        <div style="overflow: scroll; height: auto; background-color: #eee;" class="form-control">{{selectedRequest.request.body}}</div>
      </div>
    </div>
  </div>

  <h3>Response body</h3>
  <div style="overflow: scroll; height: auto; white-space: pre; background-color: #eee;" class="form-control">{{selectedRequest.response.body}}</div>

  <h3>Wiremock request details</h3>
  <div style="overflow: scroll; height: auto; white-space: pre; background-color: #eee;" class="form-control">{{selectedRequest | json}}</div>
</div>
